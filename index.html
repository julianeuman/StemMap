<head>
<title>Alabama Counties</title>
<link rel="stylesheet" href="leaflet/leaflet.css" />
<link rel="stylesheet" href="styles/main.css" />
<link href="styles/nouislider.min.css" rel="stylesheet">
<link href="ui/jquery-ui.css" rel="stylesheet">
<script src="scripts/jquery.js"></script>
<script src="d3/d3.js"></script>
<script src="d3/d3-tip-v0.6.7.js"></script>
<script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<script src = "scripts/alabamacounties.js"></script>
<script src = "scripts/test.json"></script>
<script src = "scripts/info.json"></script>
  <script src="https://www.gstatic.com/firebasejs/3.6.8/firebase.js"></script>
<!--   <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-database.js"></script> -->
  <script>
// Initialize Firebase
  	var config = {
	    apiKey: "AIzaSyCZk4Vjtr88SHEa0q7SptQXIOBUY4uf854",
	    authDomain: "test-vis.firebaseapp.com",
	    databaseURL: "https://test-vis.firebaseio.com",
	    storageBucket: "test-vis.appspot.com",
	    messagingSenderId: "930433700814"
  	};
	firebase.initializeApp(config);
</script>
</head>

<html>
<div id = "header" style = "width: 100%; height: 9%; background-color: #0278C8; margin-bottom: 1%">
<p>UAH STEM Map</p></div>
<div id = "sidebar" style = "background-color: #EEEEEE; height: 88%; width: 32%; float: left; margin-left: 1%">
	<div id = "county-name"></div>
	<div id = "svg_container"></div>
</div>
<div id="map" style = "float: right"></div>
<script src="ui/external/jquery/jquery.js"></script>
<script src="ui/jquery-ui.js"></script>
<script src="leaflet/leaflet.js"></script>
<script>
$(document).ready(function (){
var map = L.map('map').setView([32.5502, -85.2023], 7.2);
	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
			    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			    maxZoom: 18,
			    id: 'emilysermons.2o2npk5o',
			    accessToken: 'pk.eyJ1IjoiZW1pbHlzZXJtb25zIiwiYSI6ImNpeWM1dmVyejAwNGEzMnBlbmoxcTNsNnUifQ.Vn7bR2xDp1aR7k9f7zqvAg'
			}).addTo(map);

	map.touchZoom.disable();
	map.doubleClickZoom.disable();
	map.scrollWheelZoom.disable();
	map.boxZoom.disable();
	map.keyboard.disable();
			// L.geoJson(alCounties).addTo(map);

		
		function highlightFeature(e) {
			    var layer = e.target;

			    layer.setStyle({
			    	fillColor: 'white',
			        weight: 2,
			        color: 'white',
			        // color: '#f40539',
			        dashArray: '',
			        fillOpacity: 0.7
			    });

			    if (!L.Browser.ie && !L.Browser.opera) {
			        layer.bringToFront();
			    }
		}


		// var myDB = firebase.database().ref("Blount").orderByChild("numStudents").equalTo(50);

		// myDB.on('value', snapshot => {
  // 			console.log(snapshot.val());
  // 			console.log(snapshot.child().val());
		// });




		function writeName(feature) {
			var countyname = feature.properties.name;
			document.getElementById('county-name').innerHTML = feature.properties.name;
		}

		function eraseName(feature) {
			document.getElementById('county-name').innerHTML = "";
		}

		function countyName(feature) {
			return feature.properties.name;
		}

		function resetHighlight(e) {
			    alCount.resetStyle(e.target);
		}

		function onEachFeature(feature, layer) {
			    layer.on({
			        mouseover: function(e) {
			        	highlightFeature(e);
			        	writeName(feature);
			        },
			        // highlightFeature,
			        mouseout: function (e) {
			        	resetHighlight(e);
			        	eraseName(feature);
			        }
			    });
		}

		var alCount = 	L.geoJson(alCounties, 
						{style: function(feature) {
						return {
							fillColor: '#0278C8',
					        weight: 2,
					        opacity: 1,
					        color: 'white',
					        dashArray: '3',
					        fillOpacity: 0.95
				    	}
					},
					onEachFeature: onEachFeature
				})
				alCount.addTo(map);
		})

	</script>
</body>
</html>